<!--
=========================================================
* Argon Dashboard 2 PRO - v2.0.5
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard-pro
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../../../assets/img/favicon.png">
  <title>
    메인
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="../../../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../../../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="../../../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../../../assets/css/argon-dashboard.css?v=2.0.5" rel="stylesheet" />
  <!-- 추가된 스타일 -->
  <style>
    /* 메모 hover 효과 */
    .list-group-item:hover {
      background-color: #f1f1f1;
      transition: background-color 0.3s;
      text-decoration: underline;
    }

    /* 뒤로가기 버튼 중앙 정렬 */
    #backToList {
      display: block;
      margin: 0 auto;
    }

    /* 카드 내부 스크롤 및 높이 조정 */
    .card-body {
      flex-grow: 1;
      overflow: auto;
    }

    /* 오른쪽 열의 두 카드 높이 조정 */
    .right-column .card {
      flex: 1;
    }
  </style>
</head>

<body class="g-sidenav-show bg-gray-100">
  <div class="position-absolute w-100 min-height-300 top-0"
    style="background-image: url('https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/profile-layout-header.jpg'); background-position-y: 50%;">
    <span class="mask bg-primary opacity-6"></span>
  </div>
  <div class="main-content position-relative max-height-vh-100 h-100">
    <!-- Navbar -->
    <!-- (생략: 기존 코드 유지) -->
    <!-- End Navbar -->
    <div class="row mx-4 align-items-center mt-4">
      <!-- 카드 -->
      <div class="col">
        <div class="card shadow-lg card-profile">
          <div class="p-3">
            <h6 class="mb-0">User Name</h6>
          </div>
        </div>
      </div>
      <!-- 로그아웃 버튼 -->
      <div class="col-auto">
        <a class="btn bg-gradient-dark mb-0" href="javascript:;">로그아웃</a>
      </div>
    </div>

    <div class="container-fluid py-4" style="height: calc(100vh - 150px); overflow: auto;">
      <div class="row h-100">
        <!-- 왼쪽 첫 번째 열 -->
        <div class="col-12 col-lg-3 d-flex" style="height: 100%;">
          <div class="card h-100 d-flex flex-column">
            <!-- 카드 내용 -->
            <div class="card-header d-flex align-items-center border-bottom py-3">
              <div class="d-flex align-items-center">
                <a href="javascript:;">
                  <img src="../../../assets/img/team-4.jpg" class="avatar" alt="profile-image">
                </a>
                <div class="mx-3">
                  <a href="javascript:;" class="text-dark font-weight-600 text-sm">John Snow</a>
                  <small class="d-block text-muted">3 days ago</small>
                </div>
              </div>
              <div class="text-end ms-auto">
                <button type="button" class="btn btn-xs btn-primary mb-0">
                  <i class="fas fa-plus pe-2"></i> Follow
                </button>
              </div>
            </div>
            <!-- 카드 본문 -->
            <div class="card-body">
              <p class="mb-4">
                Personal profiles are the perfect way for you to grab their attention and persuade recruiters to continue reading your CV because you’re telling them from the off exactly why they should hire you.
              </p>
              <img alt="Image placeholder"
                src="https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/activity-feed.jpg"
                class="img-fluid border-radius-lg shadow-lg max-height-500">
              <div class="row align-items-center px-2 mt-4 mb-2">
                <div class="col-sm-6">
                  <div class="d-flex">
                    <div class="d-flex align-items-center">
                      <i class="ni ni-like-2 me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-3 ">150</span>
                    </div>
                    <div class="d-flex align-items-center">
                      <i class="ni ni-chat-round me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-3">36</span>
                    </div>
                    <div class="d-flex align-items-center">
                      <i class="ni ni-curved-next me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-2">12</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 d-none d-sm-block">
                  <div class="d-flex align-items-center justify-content-sm-end">
                    <div class="d-flex align-items-center">
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Jessica Rowland">
                        <img alt="Image placeholder" src="../../../assets/img/team-5.jpg" class="">
                      </a>
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Audrey Love">
                        <img alt="Image placeholder" src="../../../assets/img/team-2.jpg" class="rounded-circle">
                      </a>
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Michael Lewis">
                        <img alt="Image placeholder" src="../../../assets/img/team-1.jpg" class="rounded-circle">
                      </a>
                    </div>
                    <small class="ps-2 font-weight-bold">and 30+ more</small>
                  </div>
                </div>
                <hr class="horizontal dark my-3">
              </div>
            </div>
          </div>
        </div>
        <!-- 왼쪽 두 번째 열 -->
        <div class="col-12 col-lg-3 d-flex" style="height: 100%;">
          <div class="card h-100 d-flex flex-column">
            <!-- 카드 내용 -->
            <div class="card-header d-flex align-items-center border-bottom py-3">
              <div class="d-flex align-items-center">
                <a href="javascript:;">
                  <img src="../../../assets/img/team-4.jpg" class="avatar" alt="profile-image">
                </a>
                <div class="mx-3">
                  <a href="javascript:;" class="text-dark font-weight-600 text-sm">John Snow</a>
                  <small class="d-block text-muted">3 days ago</small>
                </div>
              </div>
              <div class="text-end ms-auto">
                <button type="button" class="btn btn-xs btn-primary mb-0">
                  <i class="fas fa-plus pe-2"></i> Follow
                </button>
              </div>
            </div>
            <!-- 카드 본문 -->
            <div class="card-body">
              <p class="mb-4">
                Personal profiles are the perfect way for you to grab their attention and persuade recruiters to continue reading your CV because you’re telling them from the off exactly why they should hire you.
              </p>
              <img alt="Image placeholder"
                src="https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/activity-feed.jpg"
                class="img-fluid border-radius-lg shadow-lg max-height-500">
              <div class="row align-items-center px-2 mt-4 mb-2">
                <div class="col-sm-6">
                  <div class="d-flex">
                    <div class="d-flex align-items-center">
                      <i class="ni ni-like-2 me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-3 ">150</span>
                    </div>
                    <div class="d-flex align-items-center">
                      <i class="ni ni-chat-round me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-3">36</span>
                    </div>
                    <div class="d-flex align-items-center">
                      <i class="ni ni-curved-next me-1 cursor-pointer opacity-6"></i>
                      <span class="text-sm me-2">12</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 d-none d-sm-block">
                  <div class="d-flex align-items-center justify-content-sm-end">
                    <div class="d-flex align-items-center">
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Jessica Rowland">
                        <img alt="Image placeholder" src="../../../assets/img/team-5.jpg" class="">
                      </a>
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Audrey Love">
                        <img alt="Image placeholder" src="../../../assets/img/team-2.jpg" class="rounded-circle">
                      </a>
                      <a href="javascript:;" class="avatar avatar-xs rounded-circle" data-toggle="tooltip"
                        data-original-title="Michael Lewis">
                        <img alt="Image placeholder" src="../../../assets/img/team-1.jpg" class="rounded-circle">
                      </a>
                    </div>
                    <small class="ps-2 font-weight-bold">and 30+ more</small>
                  </div>
                </div>
                <hr class="horizontal dark my-3">
              </div>
            </div>
          </div>
        </div>
        <!-- 오른쪽 세 번째 열 -->
        <div class="col-12 col-lg-6 d-flex flex-column right-column" style="height: 100%;">
          <!-- 메모 카드 -->
          <div class="card mb-3 d-flex flex-column">
            <div class="card-header text-black">
              <h6 class="mb-0">메모장</h6>
            </div>
            <div class="card-body">
              <!-- 메모 리스트 -->
              <ul class="list-group w-100" id="memoList" style="cursor: pointer;">
                <li class="list-group-item d-flex justify-content-between align-items-center"
                  th:each="memo : ${memoList}">
                  <span>
                    <strong th:text="${memo.id}"></strong>. <span th:text="${memo.memo}">메모 내용</span>
                  </span>
                  <small class="text-muted" th:text="${memo.created_dt}">작성일자</small>
                </li>
              </ul>

              <!-- 메모 상세보기 -->
              <div id="memoDetail" style="display: none; width: 100%;">
                <p><strong>메모 번호:</strong> <span id="memoDetailId"></span></p>
                <p><strong>메모 내용:</strong> <span id="memoDetailContent"></span></p>
                <p><strong>작성 날짜:</strong> <span id="memoDetailDate"></span></p>
                <div class="d-flex justify-content-center mt-4">
                  <button class="btn btn-secondary" id="backToList">뒤로가기</button>
                </div>
              </div>
            </div>
            <!-- 버튼 영역 -->
            <div class="card-footer d-flex justify-content-around">
              <button class="btn btn-primary" id="prevMemo" disabled>이전 메모</button>
              <button class="btn btn-primary" id="addMemo">메모 추가</button>
              <button class="btn btn-danger" id="deleteMemo">메모 삭제</button>
              <button class="btn btn-primary" id="nextMemo" disabled>다음 메모</button>
            </div>
          </div>

          <!-- 레시피 카드 -->
          <div class="card d-flex flex-column">
            <div class="card-header text-black">
              <h6 class="mb-0" th:text="${recipe.name}">레시피 제목</h6>
            </div>
            <div class="card-body">
              <h6>재료</h6>
              <!-- 재료 목록에 들여쓰기 적용 -->
              <p th:text="${recipe.ingredients}" style="margin-left: 15px;">재료 목록</p>
              <h6>만드는 법</h6>
              <ol>
                <li th:each="step : ${steps}" th:text="${step}"></li>
              </ol>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript 코드 -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const prevButton = document.getElementById("prevMemo");
      const nextButton = document.getElementById("nextMemo");
      const addButton = document.getElementById("addMemo");
      const deleteButton = document.getElementById("deleteMemo");

      let selectedMemoIndex = -1; // 현재 선택된 메모 인덱스

      function getMemoListItems() {
        return document.querySelectorAll(".list-group-item");
      }

      function attachMemoClickEvents() {
        const memoListItems = getMemoListItems();
        memoListItems.forEach((memo, index) => {
          memo.onclick = () => {
            selectedMemoIndex = index;
            updateButtons();
            showMemoDetails(memo); // 선택된 메모의 상세보기
          };
        });
      }

      // 초기 이벤트 설정
      attachMemoClickEvents();

      // 버튼 업데이트
      function updateButtons() {
        const memoListItems = getMemoListItems();
        prevButton.disabled = selectedMemoIndex <= 0; // 첫 번째 메모일 때 비활성화
        nextButton.disabled = selectedMemoIndex >= memoListItems.length - 1; // 마지막 메모일 때 비활성화
      }

      // 이전 메모 버튼
      prevButton.addEventListener("click", () => {
        if (selectedMemoIndex > 0) {
          selectedMemoIndex--;
          const memoListItems = getMemoListItems();
          showMemoDetails(memoListItems[selectedMemoIndex]);
          updateButtons();
        }
      });

      // 다음 메모 버튼
      nextButton.addEventListener("click", () => {
        const memoListItems = getMemoListItems();
        if (selectedMemoIndex < memoListItems.length - 1) {
          selectedMemoIndex++;
          showMemoDetails(memoListItems[selectedMemoIndex]);
          updateButtons();
        }
      });

      // 메모 추가 버튼
      addButton.addEventListener("click", () => {
        const newMemoContent = prompt("새로운 메모 내용을 입력하세요:");
        if (newMemoContent) {
          const newMemo = document.createElement("li");
          newMemo.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center");
          newMemo.innerHTML = `<span><strong></strong>. ${newMemoContent}</span> <small class="text-muted">새로 추가됨</small>`;
          document.querySelector(".list-group").appendChild(newMemo);
          // 메모 번호 업데이트
          updateMemoNumbers();
          // 클릭 이벤트 다시 설정
          attachMemoClickEvents();
        }
      });

      // 메모 번호 업데이트 함수
      function updateMemoNumbers() {
        const memoListItems = getMemoListItems();
        memoListItems.forEach((memo, index) => {
          memo.querySelector("strong").innerText = index + 1;
        });
      }

      // 메모 삭제 버튼
      deleteButton.addEventListener("click", () => {
        if (selectedMemoIndex !== -1) {
          const memoListItems = getMemoListItems();
          memoListItems[selectedMemoIndex].remove();
          selectedMemoIndex = -1;
          updateButtons();
          // 상세보기 숨기고 메모 리스트 표시
          document.getElementById("memoDetail").style.display = "none";
          document.getElementById("memoList").style.display = "block";
          // 메모 번호 업데이트
          updateMemoNumbers();
          // 클릭 이벤트 다시 설정
          attachMemoClickEvents();
        }
      });

      // 메모 내용 가져오기 함수
      function getMemoContent(memo) {
        const spanElements = memo.querySelectorAll("span");
        let content = "";
        if (spanElements.length >= 2) {
          // 초기 메모 (두 번째 span에 내용이 있음)
          content = spanElements[1].innerText.trim();
        } else {
          // 동적으로 추가된 메모
          content = spanElements[0].innerText.split(". ")[1];
        }
        return content;
      }

      // 메모 상세보기
      function showMemoDetails(memo) {
        // 리스트 숨기기
        document.getElementById("memoList").style.display = "none";
        // 상세보기 표시
        const memoDetail = document.getElementById("memoDetail");
        memoDetail.style.display = "block";

        // 상세보기 데이터 채우기
        const memoId = memo.querySelector("strong").innerText;
        const memoContent = getMemoContent(memo);
        const memoDate = memo.querySelector("small").innerText;

        document.getElementById("memoDetailId").innerText = memoId;
        document.getElementById("memoDetailContent").innerText = memoContent;
        document.getElementById("memoDetailDate").innerText = memoDate;
      }

      // 뒤로가기 버튼 이벤트 (한 번만 등록)
      document.getElementById("backToList").addEventListener("click", () => {
        // 상세보기 숨기기
        document.getElementById("memoDetail").style.display = "none";
        // 리스트 다시 표시
        document.getElementById("memoList").style.display = "block";
      });
    });
  </script>

  <!--   Core JS Files   -->
  <script src="../../../assets/js/core/popper.min.js"></script>
  <script src="../../../assets/js/core/bootstrap.min.js"></script>
  <script src="../../../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../../../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <!-- Kanban scripts -->
  <script src="../../../assets/js/plugins/dragula/dragula.min.js"></script>
  <script src="../../../assets/js/plugins/jkanban/jkanban.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../../assets/js/argon-dashboard.min.js?v=2.0.5"></script>
</body>

</html>